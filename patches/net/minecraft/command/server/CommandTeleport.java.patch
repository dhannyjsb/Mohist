--- ../src-base/minecraft/net/minecraft/command/server/CommandTeleport.java
+++ ../src-work/minecraft/net/minecraft/command/server/CommandTeleport.java
@@ -1,10 +1,5 @@
 package net.minecraft.command.server;
 
-import java.util.Collections;
-import java.util.EnumSet;
-import java.util.List;
-import java.util.Set;
-import javax.annotation.Nullable;
 import net.minecraft.command.CommandBase;
 import net.minecraft.command.CommandException;
 import net.minecraft.command.ICommandSender;
@@ -18,35 +13,68 @@
 import net.minecraft.util.math.MathHelper;
 import net.minecraft.util.math.Vec3d;
 
-public class CommandTeleport extends CommandBase
-{
-    public String getName()
-    {
+import javax.annotation.Nullable;
+import java.util.Collections;
+import java.util.EnumSet;
+import java.util.List;
+import java.util.Set;
+
+public class CommandTeleport extends CommandBase {
+    private static void doTeleport(Entity teleportingEntity, CommandBase.CoordinateArg argX, CommandBase.CoordinateArg argY, CommandBase.CoordinateArg argZ, CommandBase.CoordinateArg argYaw, CommandBase.CoordinateArg argPitch) {
+        if (teleportingEntity instanceof EntityPlayerMP) {
+            Set<SPacketPlayerPosLook.EnumFlags> set = EnumSet.<SPacketPlayerPosLook.EnumFlags>noneOf(SPacketPlayerPosLook.EnumFlags.class);
+            float f = (float) argYaw.getAmount();
+
+            if (argYaw.isRelative()) {
+                set.add(SPacketPlayerPosLook.EnumFlags.Y_ROT);
+            } else {
+                f = MathHelper.wrapDegrees(f);
+            }
+
+            float f1 = (float) argPitch.getAmount();
+
+            if (argPitch.isRelative()) {
+                set.add(SPacketPlayerPosLook.EnumFlags.X_ROT);
+            } else {
+                f1 = MathHelper.wrapDegrees(f1);
+            }
+
+            teleportingEntity.dismountRidingEntity();
+            ((EntityPlayerMP) teleportingEntity).connection.setPlayerLocation(argX.getResult(), argY.getResult(), argZ.getResult(), f, f1, set, org.bukkit.event.player.PlayerTeleportEvent.TeleportCause.COMMAND);
+            teleportingEntity.setRotationYawHead(f);
+        } else {
+            float f2 = (float) MathHelper.wrapDegrees(argYaw.getResult());
+            float f3 = (float) MathHelper.wrapDegrees(argPitch.getResult());
+            f3 = MathHelper.clamp(f3, -90.0F, 90.0F);
+            teleportingEntity.setLocationAndAngles(argX.getResult(), argY.getResult(), argZ.getResult(), f2, f3);
+            teleportingEntity.setRotationYawHead(f2);
+        }
+
+        if (!(teleportingEntity instanceof EntityLivingBase) || !((EntityLivingBase) teleportingEntity).isElytraFlying()) {
+            teleportingEntity.motionY = 0.0D;
+            teleportingEntity.onGround = true;
+        }
+    }
+
+    public String getName() {
         return "teleport";
     }
 
-    public int getRequiredPermissionLevel()
-    {
+    public int getRequiredPermissionLevel() {
         return 2;
     }
 
-    public String getUsage(ICommandSender sender)
-    {
+    public String getUsage(ICommandSender sender) {
         return "commands.teleport.usage";
     }
 
-    public void execute(MinecraftServer server, ICommandSender sender, String[] args) throws CommandException
-    {
-        if (args.length < 4)
-        {
+    public void execute(MinecraftServer server, ICommandSender sender, String[] args) throws CommandException {
+        if (args.length < 4) {
             throw new WrongUsageException("commands.teleport.usage", new Object[0]);
-        }
-        else
-        {
+        } else {
             Entity entity = getEntity(server, sender, args[0]);
 
-            if (entity.world != null)
-            {
+            if (entity.world != null) {
                 int i = 4096;
                 Vec3d vec3d = sender.getPositionVector();
                 int j = 1;
@@ -54,76 +82,24 @@
                 CommandBase.CoordinateArg commandbase$coordinatearg1 = parseCoordinate(vec3d.y, args[j++], -4096, 4096, false);
                 CommandBase.CoordinateArg commandbase$coordinatearg2 = parseCoordinate(vec3d.z, args[j++], true);
                 Entity entity1 = sender.getCommandSenderEntity() == null ? entity : sender.getCommandSenderEntity();
-                CommandBase.CoordinateArg commandbase$coordinatearg3 = parseCoordinate(args.length > j ? (double)entity1.rotationYaw : (double)entity.rotationYaw, args.length > j ? args[j] : "~", false);
+                CommandBase.CoordinateArg commandbase$coordinatearg3 = parseCoordinate(args.length > j ? (double) entity1.rotationYaw : (double) entity.rotationYaw, args.length > j ? args[j] : "~", false);
                 ++j;
-                CommandBase.CoordinateArg commandbase$coordinatearg4 = parseCoordinate(args.length > j ? (double)entity1.rotationPitch : (double)entity.rotationPitch, args.length > j ? args[j] : "~", false);
+                CommandBase.CoordinateArg commandbase$coordinatearg4 = parseCoordinate(args.length > j ? (double) entity1.rotationPitch : (double) entity.rotationPitch, args.length > j ? args[j] : "~", false);
                 doTeleport(entity, commandbase$coordinatearg, commandbase$coordinatearg1, commandbase$coordinatearg2, commandbase$coordinatearg3, commandbase$coordinatearg4);
-                notifyCommandListener(sender, this, "commands.teleport.success.coordinates", new Object[] {entity.getName(), commandbase$coordinatearg.getResult(), commandbase$coordinatearg1.getResult(), commandbase$coordinatearg2.getResult()});
+                notifyCommandListener(sender, this, "commands.teleport.success.coordinates", new Object[]{entity.getName(), commandbase$coordinatearg.getResult(), commandbase$coordinatearg1.getResult(), commandbase$coordinatearg2.getResult()});
             }
         }
     }
 
-    private static void doTeleport(Entity teleportingEntity, CommandBase.CoordinateArg argX, CommandBase.CoordinateArg argY, CommandBase.CoordinateArg argZ, CommandBase.CoordinateArg argYaw, CommandBase.CoordinateArg argPitch)
-    {
-        if (teleportingEntity instanceof EntityPlayerMP)
-        {
-            Set<SPacketPlayerPosLook.EnumFlags> set = EnumSet.<SPacketPlayerPosLook.EnumFlags>noneOf(SPacketPlayerPosLook.EnumFlags.class);
-            float f = (float)argYaw.getAmount();
-
-            if (argYaw.isRelative())
-            {
-                set.add(SPacketPlayerPosLook.EnumFlags.Y_ROT);
-            }
-            else
-            {
-                f = MathHelper.wrapDegrees(f);
-            }
-
-            float f1 = (float)argPitch.getAmount();
-
-            if (argPitch.isRelative())
-            {
-                set.add(SPacketPlayerPosLook.EnumFlags.X_ROT);
-            }
-            else
-            {
-                f1 = MathHelper.wrapDegrees(f1);
-            }
-
-            teleportingEntity.dismountRidingEntity();
-            ((EntityPlayerMP)teleportingEntity).connection.setPlayerLocation(argX.getResult(), argY.getResult(), argZ.getResult(), f, f1, set);
-            teleportingEntity.setRotationYawHead(f);
-        }
-        else
-        {
-            float f2 = (float)MathHelper.wrapDegrees(argYaw.getResult());
-            float f3 = (float)MathHelper.wrapDegrees(argPitch.getResult());
-            f3 = MathHelper.clamp(f3, -90.0F, 90.0F);
-            teleportingEntity.setLocationAndAngles(argX.getResult(), argY.getResult(), argZ.getResult(), f2, f3);
-            teleportingEntity.setRotationYawHead(f2);
-        }
-
-        if (!(teleportingEntity instanceof EntityLivingBase) || !((EntityLivingBase)teleportingEntity).isElytraFlying())
-        {
-            teleportingEntity.motionY = 0.0D;
-            teleportingEntity.onGround = true;
-        }
-    }
-
-    public List<String> getTabCompletions(MinecraftServer server, ICommandSender sender, String[] args, @Nullable BlockPos targetPos)
-    {
-        if (args.length == 1)
-        {
+    public List<String> getTabCompletions(MinecraftServer server, ICommandSender sender, String[] args, @Nullable BlockPos targetPos) {
+        if (args.length == 1) {
             return getListOfStringsMatchingLastWord(args, server.getOnlinePlayerNames());
-        }
-        else
-        {
+        } else {
             return args.length > 1 && args.length <= 4 ? getTabCompletionCoordinate(args, 1, targetPos) : Collections.emptyList();
         }
     }
 
-    public boolean isUsernameIndex(String[] args, int index)
-    {
+    public boolean isUsernameIndex(String[] args, int index) {
         return index == 0;
     }
 }
